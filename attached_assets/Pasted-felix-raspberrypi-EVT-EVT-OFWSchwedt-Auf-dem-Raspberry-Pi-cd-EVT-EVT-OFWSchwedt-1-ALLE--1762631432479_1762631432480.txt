felix@raspberrypi:~/EVT/EVT-OFWSchwedt $ # Auf dem Raspberry Pi:
cd ~/EVT/EVT-OFWSchwedt

# 1. ALLE Node-Prozesse killen:
pkill -9 node

# 2. Prüfen ob alles weg ist:
ps aux | grep node

# 3. Ungültige Push-Subscriptions in SQLite löschen:
sqlite3 data/evt.db "DELETE FROM push_subscriptions WHERE endpoint = '.' OR endpoint = '' OR endpoint IS NULL;"

# 4. Prüfen ob gelöscht:
sqlite3 data/evt.db "SELECT COUNT(*) FROM push_subscriptions WHERE endpoint = '.' OR endpoint = '' OR endpoint IS NULL;"
# Sollte "0" ausgeben

# 5. Server neu starten:
npm start
root        1309  0.0  0.1   2292  1624 ?        Ss   10:43   0:00 fusermount3 -o rw,nosuid,nodev,fsname=portal,auto_unmount,subtype=portal -- /run/user/1000/doc
felix      55316  0.0  0.2   6252  2028 pts/0    S+   20:49   0:00 grep --color=auto node
Error: in prepare, no such table: push_subscriptions
Error: in prepare, no such table: push_subscriptions

> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.js

⏰ Starting availability reminder scheduler
8:49:56 PM [express] serving on port 5173
ErrorEvent {
  [Symbol(kTarget)]: WebSocket {
    _events: [Object: null prototype] {
      error: [Function],
      message: [Function],
      close: [Function],
      open: [Function]
    },
    _eventsCount: 4,
    _maxListeners: undefined,
    _binaryType: 'arraybuffer',
    _closeCode: 1006,
    _closeFrameReceived: false,
    _closeFrameSent: false,
    _closeMessage: <Buffer >,
    _closeTimer: null,
    _errorEmitted: true,
    _extensions: {},
    _paused: false,
    _protocol: '',
    _readyState: 3,
    _receiver: null,
    _sender: null,
    _socket: null,
    _bufferedAmount: 0,
    _isServer: false,
    _redirects: 0,
    _autoPong: true,
    _url: 'wss://./v2',
    _req: null,
    [Symbol(shapeMode)]: false,
    [Symbol(kCapture)]: false
  },
  [Symbol(kType)]: 'error',
  [Symbol(kError)]: Error: getaddrinfo ENOTFOUND .
      at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26) {
    errno: -3007,
    code: 'ENOTFOUND',
    syscall: 'getaddrinfo',
    hostname: '.'
  },
  [Symbol(kMessage)]: 'getaddrinfo ENOTFOUND .'
}
Error in initial reminder check: ErrorEvent {
  [Symbol(kTarget)]: WebSocket {
    _events: [Object: null prototype] {
      error: [Function],
      message: [Function],
      close: [Function],
      open: [Function]
    },
    _eventsCount: 4,
    _maxListeners: undefined,
    _binaryType: 'arraybuffer',
    _closeCode: 1006,
    _closeFrameReceived: false,
    _closeFrameSent: false,
    _closeMessage: <Buffer >,
    _closeTimer: null,
    _errorEmitted: true,
    _extensions: {},
    _paused: false,
    _protocol: '',
    _readyState: 3,
    _receiver: null,
    _sender: null,
    _socket: null,
    _bufferedAmount: 0,
    _isServer: false,
    _redirects: 0,
    _autoPong: true,
    _url: 'wss://./v2',
    _req: null,
    [Symbol(shapeMode)]: false,
    [Symbol(kCapture)]: false
  },
  [Symbol(kType)]: 'error',
  [Symbol(kError)]: Error: getaddrinfo ENOTFOUND .
      at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26) {
    errno: -3007,
    code: 'ENOTFOUND',
    syscall: 'getaddrinfo',
    hostname: '.'
  },
  [Symbol(kMessage)]: 'getaddrinfo ENOTFOUND .'
}
